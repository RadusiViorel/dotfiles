#!/usr/bin/env bash
# Triggers xmobar bar refresh by regenerating immediately
CACHE_DIR="${HOME}/.config/xmobar/.cache"
CACHE_FILE="${CACHE_DIR}/bar_output"
TRIGGER_FILE="${CACHE_DIR}/refresh_trigger"

mkdir -p "${CACHE_DIR}"

# Delete cache to force regeneration, then run bar script
rm -f "${CACHE_FILE}"
"${HOME}/.config/xmobar/scripts/bar" > /dev/null

# Touch trigger so polling xmobar knows to pick up the new cache
touch "${TRIGGER_FILE}"
