#################################
#
# Backend
#
#################################

# Backend to use: "xrender" or "glx", "egl".
# GLX backend is typically much faster but depends on a sane driver.
backend = "glx";

#################################
#
# GLX backend
#
#################################

glx-no-stencil = true;
glx-copy-from-front = false;

# GLX backend: Use MESA_copy_sub_buffer to do partial screen update.
# My tests on nouveau shows a 200% performance boost when only 1/4 of the screen is updated.
# May break VSync and is not available on some drivers.
# Overrides --glx-copy-from-front.
# glx-use-copysubbuffermesa = true;

# GLX backend: Avoid rebinding pixmap on window damage.
# Probably could improve performance on rapid window content changes, but is known to break things on some drivers (LLVMpipe).
# Recommended if it works.

glx-no-rebind-pixmap = true;

use-damage = false;

#################################
#
# Opacity
#
#################################

inactive-opacity          = 0.70;
frame-opacity             = 0.7;
inactive-opacity-override = true;
active-opacity            = 1;
inactive-dim = 0.2;
inactive-dim-fixed = true;

opacity-exclude = [
];

opacity-rules=[
 # " 50:class_g = 'firefox' && !focuesd"
 # "100:class_g = 'example'"
]

# Do not let dimness adjust based on window opacity.
# inactive-dim-fixed = true;

#################################
#
# Shadows
#
#################################

# Enabled client-side shadows on windows.
shadow          = false;
shadow-radius   =  35; #(default 12) The blur radius for shadows.
shadow-offset-x = -35; #(default -15) The left offset for shadows.
shadow-offset-y = -35; #(default -15) The top offset for shadows.
shadow-opacity  = 0.8; #(default .75) The translucency for shadows.

# Set if you want different colour shadows
# shadow-red = 0.0;
# shadow-green = 0.0;
# shadow-blue = 0.0;

# shadow-exclude-reg = "x10+0+0";
# xinerama-shadow-crop = true;


# The shadow exclude options are helpful if you have shadows enabled. Due to the way compton draws its shadows, certain applications will have visual glitches
# (most applications are fine, only apps that do weird things with xshapes or argb are affected).
# This list includes all the affected apps I found in my testing. The "! name~=''" part excludes
# shadows on any "Unknown" windows, this prevents a visual glitch with the XFWM alt tab switcher.

# shadow-exclude = "n:e:Notification";

shadow-exclude = [
  # Removed to avoid no-shadow in modal dialog windows.
  # "! name~=''",
  "name = 'Notification'",
  "name = 'Plank'",
  "name = 'Docky'",
  "name = 'Kupfer'",
  "name = 'Pensela'",
  "name = 'Drawing Board'",
  "class_g  = 'Conky'",
  "class_g  = 'Kupfer'",
  "class_g  = 'Synapse'",
  "class_g ?= 'Notify-osd'",
  "class_g ?= 'Cairo-dock'",
  "class_g  = 'Cairo-clock'",
  "class_g ?= 'Xfce4-notifyd'",
  #
  # Exclude special Firefox/Firefox-esr/Thunderbird dropdowns.
    # Ref: https://github.com/chjj/compton/issues/247
   "class_g = 'Thunderbird' && argb",
   "class_g = 'Telegram' && argb",
   "name ?= 'Thunderbird' && (window_type = 'utility' || window_type = 'popup_menu')",
  #
  # Exclude some special popup menu shadows, but Modal Windows.
  # These are more finetuning thant previous ones:
  "class_g ?= 'Thunderbird' && class_i = 'Popup' && argb",
  "class_g = 'firefox' && (window_type = 'utility' || window_type = 'popup_menu') && argb",
  "class_g = 'Firefox' && (window_type = 'utility' || window_type = 'popup_menu') && argb",
  "class_g = 'firefox-esr' && (window_type = 'utility' || window_type = 'popup_menu') && argb",
  "class_g = 'Firefox-esr' && (window_type = 'utility' || window_type = 'popup_menu') && argb",
  "class_g = 'Tor Browser' && (window_type = 'utility') && argb",
  "class_g = 'Navegador Tor' && (window_type = 'utility' || window_type = 'popup_menu') && argb",
  "class_g = 'Thunderbird' && (window_type = 'utility' || window_type = 'popup_menu') && argb",
  "class_g = 'Mozilla Thunderbird' && (window_type = 'utility' || window_type = 'popup_menu') && argb",
    "class_g ?= 'Xfce4-power-manager'",
  #
  # Exclude Vokoscreen and VokoscreenNG area selector
  #
  "class_g ?= 'vokoscreen' && argb",
  "name = '√Årea'",
  "name *= 'Cuenta regresiva'",
# "override_redirect = true"
];
# Avoid drawing shadow on all shaped windows (see also: --detect-rounded-corners)
#  Deprecated, use --shadow-exclude 'bounding_shaped' or --shadow-exclude 'bounding_shaped && !rounded_corners' instead.
shadow-ignore-shaped = false;

#################################
#
# Corners
#
#################################
corner-radius = 4;

# uncommented for square notification box
rounded-corners-exclude = [
  "class_g = 'Dunst'"
];

#################################
#
# Fading
#
#################################

fading        = true;
fade-in-step  = 0.022;
fade-out-step = 0.022;
fade-delta    = 3;

# no-fading-openclose = true;
# no-fading-destroyed-argb = true;
fade-exclude = [

];

#################################
#
# Blur
#
#################################
# methods: none, gaussian, box, kernel (define custom kernel), dual_kawase
blur:
{
  method = "dual_kawase";
  size = 10;
  strength = 3;
# default deviation is 0.84
# deviation = false;
};

# semi-transparent
blur-background = true

# Blur background of opaque windows with transparent frames as well.
blur-background-frame = true

# Use fixed blur strength rather than adjusting according to window opacity.
# Do not let blur radius adjust based on window opacity.
blur-background-fixed = true

# set custom blur kernel (method to kernel), preset examples: 3x3box", "5x5box", "5x5gaussian", "9x9gaussian"
# blur-kern = "5x5gaussian";

#blur-method = "kernel";
#blur-size = 90;
#blur-strength = 3;
#blur-deviation = 5.0;

blur-background-exclude = [
  "class_g     = 'Peek'",
  "class_g     = 'Pensela'",
  "name        = 'Drawing Board'",
  "window_type = 'dock'",
  "window_type = 'dropdown_menu'",
  "window_type = 'combo'",
  "window_type = 'popup_menu'",
  "window_type = 'utility'",
  "window_type = 'desktop'",
];


#################################
#
# OTHER CONFIG
#
#################################

log-level = "warn";
log-file  = "/home/radusiviorel/.config/picom/log";


mark-wmwin-focused     = true;
mark-ovredir-focused   = true;
detect-rounded-corners = true;
detect-client-opacity  = true;
# use-ewmh-active-win  = true;

#vsync = true;

# sw-opti = true;
# unredir-if-possible = true;
# unredir-if-possible-delay = 5000;
# unredir-if-possible-exclude = [ ];

focus-exclude = [ "class_g = 'Cairo-clock'" ];

detect-transient = true;
detect-client-leader = true;
invert-color-include = [ ];

resize-damage = 2;

wintypes:
{
  dock          = { shadow = true; }
  dnd           = { shadow = false; }
  popup_menu    = { opacity = 1; }
  dropdown_menu = { opacity = 1; }
  tooltip       = { fade = true; opacity = 1.0; focus = true; };
  dialog        = { opacity = 1.0; };
};
